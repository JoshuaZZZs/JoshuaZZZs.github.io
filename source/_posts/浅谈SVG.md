---
title: 浅谈SVG
date: 2019-12-07 16:14:44
tags:
	- 前端
	- SVG
categories:
	- web前端
	
	
---



# 浅谈SVG

## 一、SVG相关概念

- 什么是SVG

  svg(Scalable Vector Graphic)，是一种可缩放的矢量图形，现在就针对定义来聊聊。

  - 矢量图形和栅格图形

    - 栅格图形

      在这种系统中，图像由一个像素数组组成，这个数组里面的每一个像素都会用图形对应位置的RGB值表示，可以认为在一个图像上划分出N个正方形小方块，每一个小方块的值都等于图像在该位置的颜色，且改颜色用RBG的形式表示

    - 矢量图形

      <!--more-->
    
      在这种系统中，图像由一组几何图形的指令组成，矢量阅读器会按照指令在对应的指标集上绘制出一系列对应的图形。可以把图像切割成了N个几何图形，每一个图形都会记录相关的坐标，坐标间的连接顺序，方法等要素从而生成完成这个图形的指令，阅读器就会根据这些指令画出一个个几何图形最后形成完整的图像

  - 可缩放
  
    其实在上面一点我们就能很清楚的知道矢量图实际上是拿到了画图的指令所以当我们方法缩小的时候其实只是改变了背景画布的大小并不会改变指令，所以阅读器依旧能根据指令绘制出完整的图像
    

## 二、SVG基本属性

- ### 坐标系统

  坐标系统是svg的基础，只有连接坐标我们才能确定各种图形的定位和属性的值，并通过操作各类标签和坐标实现我们想要的效果

  1. 视口:也就是画布的区域，默认单位为px，可选的单位有：em,ex,px,cm,mm等
  2. 用户默认坐标系：原点(0,0)在视口坐上角，水平坐标轴(x轴)向右递增，垂直坐标轴(y轴)向下递增
  3. 为视口指定坐标系(viewbox):在视口中所有单位都默认为px且使用默认坐标系统，但如果需要从新修改坐标系统的话就需要用到viewbox属性，该属性有4个值(最小x坐标，最小y坐标，宽度，高度)

- ### 图形

  - 图形标签

    - 线段(line):使用`<line>`标签，需要制定起止点的x,y坐标，默认单位为坐标系坐标
    - 矩形(rect):使用`<revt>`标签，需要制定左上角起始点的x,y坐标，宽度(width)和高度(height)
    - 圆(circle)和椭圆(ellipse):使用`<circle>`标签，需要制定圆心坐标cx,cy，半径(r),若是椭圆还要制定xy的半轴长度rx,ry
    - 多边形(polygon):使用`<polygon>`标签，这个标签可以组成任意封闭图形只要在points属性制定一系列的点的坐标并用逗号或空格分隔，会根据points各点依次连接并在最后自动重回起点
    - 折线(polyline):使用`<polyline>`标签，这个标签基本上等同于多边形标签，但有一点不同的是它在画完最后一点时不会重回起点，所以一般用来画不封闭的图形

  - 图形属性：

    - 画笔类

      1. stroke:画笔颜色，默认none
      2. stroke-width:画笔宽度，默认1
      3. stroke-opacity:画笔透明度，默认1.0
      4. stroke-dasharry:用一组的数字制定虚线和间隙的长度，默认none
      5. stroke-linejoin:图形连接处的形状，默认miter(尖),round(圆滑),bevel(平的)

    - 填充类

      1. fill:制定填充颜色，默认blcak
      2. fill-opacity:填充透明度，默认1.0
      3. fill-rule:是否在图形内，当线段有交叉时才有效。默认nonezero

    - 样式类(简单来说SVG标签和HTML的样式使用方法是一样的，只是属性不同而已)

      1. 结构:和HTML标签应用CSS类似

         `stroke:blue;fill:red;`

      2. 内联样式(Style):给标签应用style属性

         ```css
         <circle cx='10',cy='50',r='10' style="fill:red; stroke:blue">
         <rect x='10',y='50',width='30' height='40'style="fill:red;stroke:blue" >
         ```

         

      3. 样式类(Class):给标签应用calss属性，所有带有同名类的标签都会应用同一样式

         ```scss
         .special{
             fill:red;
             stroke:blue
         }
         <circle cx='10',cy='50',r='10' class='special'>
         <rect x='10',y='50',width='30' height='40' class='special'>
         ```

##三、 组合与复用

#### \<g>标签

​	`<g>`标签会把它所有的子元素都当成一个组合，每个组合都可以有自己的id，title，类似于自定义的标签，这样我们就能够很方便的复用组合好的复杂图形

```xml
<g id='demo1'>
	<circle cx='100' cy='50' r='10'></circle>
    <polyline points='100 60,100 70,100 80,110 80,100 70'></polyline>
</g>
```



#### \<use>标签

`<use>`元素在指定对应的值（`xline:href='xx'`）后能够实现类似于复制粘贴的功能,并且需要指定定赋值的样本原点需要移动到的位置，一般和`<g>`组合使用

```xml	
<g id='house'>
    <desc>周家堡</desc>
    <rect x="0" y="40" width="60" height="60"></rect>
    <polyline points='0 40,30 0,60 40'></polyline>
    <polyline points='30 100,30 70,44 70,44 100'></polyline>
</g>
<use xline:href='#house' x="100" y="100"></use>
<use xline:href='#house' x="-50" y="-50"></use>
```

#### \<defs>标签

在我们使用`<g>`标签的时候会有一个问题就是只要定义了组合就马上会被创建,而且我们没有办法去对组合的样式进行修改，因此这样一来复用性其实不是很好，这个时候就需要使用`<defs>`标签，我们可以预先在该标签内写好我们想要复用的组合或者图形，他们会被定义但并不会被创建出来，只有当我们使用`<use>`引用时才会被创建，并且能够对模板使用样式

```xml
<defs>
<g id='house'>
    <desc>周家堡</desc>
    <rect x="0" y="40" width="60" height="60"></rect>
    <polyline points='0 40,30 0,60 40'></polyline>
    <polyline points='30 100,30 70,44 70,44 100'></polyline>
</g>
</defs>
<use xline:href='#house' x="100" y="100" style="fill:pink;"></use>//粉色房子
<use xline:href='#house' x="-50" y="-50" style="fill:blue;"></use>//蓝色房子
```

### 四、路径\<Path>

`<path>`标签可以绘制出任意图形，只需要指定一系列的坐标，所有描述属性坐标的数据都放在d属性(data)里面

> 一段path可以有多个绘制组合，也就是说在一个path标签里面可以画出N个任意中断或者连接的的图形，
>
> ```xml
> <path d="M 10,20 L10,60 40,45 M60,60 L90,90 60,45"></path>//绘制出了两个角度
> ```

##### d(data)属性

**指令**:

**M(moveto)**：d属性必须以此开头,代表的是画笔起始的位置，后面紧接着一个使用逗号或者空格分	隔符的x,y坐标，M表示绝对位置，m表示相对位置，但是由于m没有参照系所以第一个m也会变成	绝对位置

**L(Lineto)**:L属性后面也是跟着坐标以逗号或者空格分隔，表示的是画笔移动的目的地坐标，L绝对，l相对(参考的是前一个M的位置，下同不赘述)

**Z(closepath)**:用来关闭当前路径同时开启一个子路径，Z后面不跟坐标且他的大小写效果一模一样，同时Z标签会连接起始点从而形成封闭的图形

**V，H**:用来绘制水平方向(H)和垂直方向(V)的路径，后面只要跟一个目标点的x或y坐标，因为另一个坐标是定死的，大小写情况和其他标签相同

**A(elliptical Arc)**:用来绘制一条到目标点的椭圆弧，有以下参数

1. 起始点坐标，x,y
2. x轴旋转角度
3. 圆弧角度是否大于180,0是小于1是大于
4. 圆弧正负角度0是负角度，1是正角度也就是画笔以逆时针还是顺时针画弧
5. 终点x,y坐标

**Q、T、C、S**：贝塞尔曲线相关不建议使用（因为太难了我搞不懂...）

### 五、文本

文本标签用来绘制svg图形中的文字

####\<text>标签

`<text>`需要制定x,y坐标来作为第一个文字的位置其样式基本属性和css中文字有关的属性基本一样，

属性：

> font-size:字体大小
>
> font-style:字体是否倾斜italic(倾斜)，normal
>
> text-decoration:是否有下划线none,underline,overline,line-through

#### \<tspan>标签

我们可以简单的把该标签理解成span，他们都可以嵌入到文本中，在这个标签你可以为它单独定制样式等属性，而且由于是内嵌元素所以也不需要指定坐标

**改变位置的属性**：

​	dx,dy(水平和垂直方向偏移量):dx,dy的值都是你想偏移的具体数值，且都是相对于原本位置来说	的，类似于position里面的relative

​	x,y(绝对定位):这里的xy都是当前文本的绝对位置，类似于`<text>`的xy

> x，y，dx，dy都可以单独或者组合使用，单独使用时其他为指明的值为默认值

#### 文本路径\<textPath>

这个也是以后可能使用频率很高的属性，这个属性类似于`<path>`标签，让文字按照指定路径排列，

> 使用步骤
>
> 1：将文字的显示路径用path预先定义我们想要的path路径一般放在`<defs>`里面
>
> 2：定义好\<text>文本域，在文本里面加入\<textPath>标签，并且使用`xline:href=xxx`来引用
>
> 3.在\<textPath>标签中定义我们的文字



